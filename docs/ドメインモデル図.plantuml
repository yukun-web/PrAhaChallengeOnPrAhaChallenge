@startuml
' プラハチャレンジ ドメインモデル図（クラス図）
skinparam class {
  BackgroundColor White
  BorderColor #888
}
skinparam shadowing false
hide circle

' エンティティ
class 参加者 {
  +id: UUID
  +名前: string
  +メールアドレス: string
  +在籍ステータス: 在籍ステータス
  -- 制約 --
  メールアドレスは一意
  在籍中 でない場合は チーム に所属不可
}

class チーム {
  +id: UUID
  +名前: string
  -- 制約 --
  名前は英字のみ（例: a, b, c, ...）
  チーム名は一意
  人数は原則 2..4 名（一時的に 1 や 5 もあり得る）
}

class 課題 {
  +id: UUID
  +タイトル: string
}

' 参加者ごとの課題進捗（割当）
class 参加者課題 {
  +id: UUID
  +進捗ステータス: 進捗ステータス
}

' 値オブジェクト / 列挙
enum 在籍ステータス {
  在籍中
  休会中
  退会済
}

enum 進捗ステータス {
  未着手
  取組中
  レビュー待ち
  完了
}

' ステータス遷移の注釈
note right of 参加者課題
  進捗ステータス遷移:
  未着手 -> 取組中 -> レビュー待ち -> 完了
  レビュー待ち -> 取組中 への戻し可
  完了 は変更不可
  進捗を変更できるのは所有者の 参加者 のみ
end note

' 関連
参加者 "1" -- "0..1" チーム : 所属
参加者 "1" -- "*" 参加者課題 : 所有
課題   "1" -- "*" 参加者課題 : 割当

' ドメインルールに関する注記
note bottom of チーム
  自動再編成ルール:
  - 減少で 2 名以下になった場合: 管理者に通知
  - 1 名チームが発生: 最少人数のチームへ自動合流（同数はランダム）
  - 復帰（休会/退会から在籍中へ）: 最少人数のチームに自動所属
  - 5 名になった場合: 自動的に 2 チームに分解（分け方は任意）
end note

@enduml